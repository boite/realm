{% extends "@Theme/layout.html.twig" %}

{% block content %}
{#
<h3>Resource: {{ resource.getId }}</h3>
<dl>
  <dt>ID</dt><dd>{{ resource.getId }}</dd>
</dl>

<h3>Properties</h3>
<ul>
{% for property in resource.getProperties() %}
  <li><span class="badge">{{ property.getLanguage() }}</span> <b>{{ property.getName() }}</b>: {{ property.getValue() }}</li>
{% endfor %}
</ul>
#}

<div class="row">
  <div class="col-md-3">
    <h4>Sections</h4>
    {% for section in resource.getSections() %}
      <a href="#" onclick="selectDetail('detail-section-{{ section.getId() }}'); return false;">{{ section.getPresenter().presentLabel() }}</a>
      <small>
        {{ section.getPresenter().getEffectiveAt()}}
      </small>
      <br />
    {% endfor %}

  </div>

  <div class="col-md-6">
    {% for section in resource.getSections() %}
      <div class="detail" id="detail-section-{{ section.getId() }}">
        <h4>{{ section.getPresenter().presentLabel() }}</h4>
        <div class="meta">
          <b>TypeID</b>: <i>{{ section.getSourceTypeId() }}</i>
          <b>Type:</b>
          {% if section.getType() %}
            <a href="/{{ project.getId }}/sectionTypes/{{section.getType().getId() }}">{{ section.getType().getId() }}</a></span>
          {% else %}
            No type
          {% endif %}

          <b>Created:</b> {{ section.getPresenter().getCreatedAt()}}
          <b>Updated:</b> {{ section.getPresenter().getUpdatedAt()}}
          <b>Effective:</b> {{ section.getPresenter().getEffectiveAt()}}
        </div>
        {% for value in section.getValues() %}
          <div style="border: 2px solid #f0f0f0; margin-bottom: 20px; padding: 0 5px 0px; ">
            <label>{{ value.getPresenter().getLabel()}}</label><br />

            <input style="margin-bottom: 0px; color: #202020; font-weight: bold;" disabled class="form-control" value="{{ value.getPresenter().getDisplayValue() }}" />
            <div class="meta"  style="margin-top: 5px">
              <strong>Concept: </strong>
            {% if value.getConcept() %}
              {#% if value.getSourceConceptId() != value.getConcept().getId() %}
                <a href="/{{ project.getId() }}/mappings/{{ value.getSourceConceptId() }}" style="text-decoration: line-through;">{{ value.getSourceConceptId() }}</a>
                mapped to
              {% endif %#}
              <a href="/{{ project.getId() }}/concepts/{{value.getConcept().getId()}}">{{ value.getConcept().getId() }}</a>
              ({{ value.getConcept().getShortName() }})
            {% else %}
                <span style="color: red;">
                  <i>{{ value.getConceptId() }} (undefined)</i>
                </span>
            {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>
    {% endfor %}
  </div>
  <div class="col-md-3">
    <div style="border: 2px solid #f0f0f0; background-color: #f8f8f8; min-height: 200px; padding: 0px 10px 0px 10px">
      <h4>Resource</h4>
      <h5>Source</h5>
      {% if resource.getSource() %}
      <dl>
        <dt>ID</dt><dd>{{ resource.getSource().getId() }}</dd>
        <dt>DisplayName</dt><dd>{{ resource.getSource().getDisplayName() }}</dd>
        <dt>Logo</dt><dd><img src="{{ resource.getSource().getLogoUrl() }}" style="width: 100%"/></dd>
      </dl>
      {% endif %}
    </div>
  </div>

</div>
{% endblock %}
